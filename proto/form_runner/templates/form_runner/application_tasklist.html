{% from "govuk_frontend_jinja/components/tag/macro.html" import govukTag %}
{% from "govuk_frontend_jinja/components/details/macro.html" import govukDetails %}

{% extends "form_runner/base.jinja.html" %}

{% block pageTitle %}{% trans %}Your application{% endtrans %} - {% trans %}One Funding Service{% endtrans %}{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-l">
      <span class="govuk-caption-l">{{ application.round.proto_grant.title_json.en }}</span>
      Application for {{ application.round.title_json.en }}
    </h1>

    {{ govukDetails({"summaryText": "Help with filling out your application", "text": ""}) }}

    <dl>
      <dt class="govuk-heading-s app-application-details">{% trans %}Submission deadline:{% endtrans %}</dt>
      <dd class="govuk-body govuk-!-margin-bottom-2"> {{ application.round.deadline | datetime_format_full_month }}</dd>

      <dt class="govuk-heading-s app-application-details">{% trans %}Reference:{% endtrans %}</dt>
      <dd class="govuk-body govuk-!-margin-bottom-2"> {{ application.code }}</dd>

      <dt class="govuk-heading-s app-application-details">
          {% trans %}Status:{% endtrans %}
      </dt>
      {% if application.not_started %}
        <dd class="govuk-!-margin-bottom-2">
          {{ govukTag({"text": "Not started", "classes": "govuk-tag--grey"}) }}
        </dd>
      {% elif application.in_progress %}
        <dd class="govuk-!-margin-bottom-2">
          {{ govukTag({"text": "In progress", "classes": "govuk-tag--green"}) }}
        </dd>
      {% endif %}
    </dl>

    <ol class="govuk-list">
      {% for section in application.round.application_sections %}
      <li>
        <h2 class="govuk-heading-m">Section {{ loop.index }}</h2>

        <hr class="govuk-section-break govuk-section-break--visible govuk-!-margin-bottom-2"/>
        <a class="govuk-link govuk-link--no-visited-state" href="#">{{ section.title }}</a>
        {{ govukTag({"text": "Not started", "classes": "govuk-tag--grey app-!-float-right"}) }}
        <hr class="govuk-section-break govuk-section-break--visible govuk-!-margin-top-3"/>
      </li>

      {% if not loop.last %}
        <hr class="govuk-section-break govuk-section-break--m"/>
      {% endif %}
      {% endfor %}
    </ol>
  </div>
</div>
{% endblock %}
